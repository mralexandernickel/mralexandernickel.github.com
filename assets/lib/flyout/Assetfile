require "rake-pipeline-web-filters"
require "rake-pipeline-web-filters/helpers"
require "json"

# Compile all Less Files and concatenate...
output "public/assets/css"
input "assets" do
  match "less/master.less" do
    less :paths => ["assets/lib/bootstrap/less","assets/lib/font-awesome/less","assets/less"]
      copy "flyout.css"
  end
end

# Compile all Backend Javascripts and concatenate...
output "public/assets/js"
input "assets/coffee" do
  match "**/*.coffee" do
    coffee_script
    concat "flyout.js"
  end
end

# Font Awesome Fonts
output "public/assets/font"
input "assets/lib/font-awesome/font" do
  match "fontawesome-webfont.*" do
    copy
  end
end

# Bootstrap Javascript
output "public/assets/lib/bootstrap"
input "assets/lib/bootstrap" do
  match "js/*.js" do
    concat ["js/bootstrap-transition.js","js/bootstrap-tooltip.js"], "bootstrap.js"
  end
end